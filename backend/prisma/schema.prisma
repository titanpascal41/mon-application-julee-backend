generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int      @id @default(autoincrement())
  prenom           String
  nom              String
  email            String   @unique
  motDePasse       String
  profilId         Int
  description      String?
  societeId        Int?
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@index([profilId], map: "users_profilId_fkey")
  @@index([societeId], map: "users_societeId_fkey")
  @@map("users")
}

model Profil {
  id               Int      @id @default(autoincrement())
  nom              String   @unique
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("profils")
}

model Societe {
  id               Int      @id @default(autoincrement())
  nom              String   @unique
  adresse          String?
  email            String?
  telephone        String?
  responsable      String?
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("societes")
}

model Statut {
  id               Int      @id @default(autoincrement())
  nom              String   @unique
  description      String?
  quiPeutAppliquer String?
  actif            Boolean  @default(true)
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("statuts")
}

model Collaborateur {
  id               Int      @id @default(autoincrement())
  nom              String
  email            String   @unique
  poste            String?
  telephone        String?
  actif            Boolean  @default(true)
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("collaborateurs")
}

model Demande {
  id                          Int       @id @default(autoincrement())
  nomProjet                   String?
  description                 String?   @db.Text
  descriptionPerimetre        String?   @db.Text
  perimetre                   String?   @db.Text
  typeProjet                  String?
  dateReception               DateTime
  dateValidationSI            DateTime?
  dateValidationPlanningDEV   DateTime?
  dateValidationPlanningTIV   DateTime?
  dateReponseDEV              DateTime?
  dateReponseTIV              DateTime?
  dateValidationPlanChargeDEV DateTime?
  dateValidationPlanChargeTIV DateTime?
  statutSoumission            String?
  statutId                    Int?
  isDraft                     Boolean   @default(false)
  dateCreation                DateTime  @default(now())
  dateModification            DateTime  @updatedAt

  @@index([statutId], map: "demandes_statutId_fkey")
  @@map("demandes")
}

model Sprint {
  id                 Int       @id @default(autoincrement())
  nom                String
  description        String?   @db.Text
  dateDebut          DateTime
  dateFin            DateTime
  dateValidationSI   DateTime?
  dateReponseDEV     DateTime?
  dateReponseTIV     DateTime?
  etape              String?
  evenementImportant String?
  pointsControle     Json?
  ressources         Json?
  respectPlanning    Boolean   @default(false)
  dateCreation       DateTime  @default(now())
  dateModification   DateTime  @updatedAt

  @@map("sprints")
}

model Ressource {
  id               Int      @id @default(autoincrement())
  nom              String
  type             String
  disponibiliteHJ  Float
  tauxJournalier   Float
  actif            Boolean  @default(true)
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("ressources")
}

model Delai {
  id               Int       @id @default(autoincrement())
  dateValidationSI DateTime?
  dateReponseDEV   DateTime?
  dateReponseTIV   DateTime?
  delaiDEV         Float?
  delaiTIV         Float?
  respectDelaiDEV  Boolean   @default(false)
  respectDelaiTIV  Boolean   @default(false)
  rappelEnvoyeDEV  Boolean   @default(false)
  rappelEnvoyeTIV  Boolean   @default(false)
  notificationVue  Boolean   @default(false)
  dateCreation     DateTime  @default(now())
  dateModification DateTime  @updatedAt

  @@map("delais")
}

model Cout {
  id                      Int      @id @default(autoincrement())
  chargePrevisionnelleDEV Float?
  chargeEffectiveDEV      Float?
  tjmDEV                  Float?
  chargePrevisionnelleTIV Float?
  chargeEffectiveTIV      Float?
  tjmTIV                  Float?
  coutPrevuDEV            Float?
  coutReelDEV             Float?
  coutPrevuTIV            Float?
  coutReelTIV             Float?
  coutPrevuTotal          Float?
  coutReelTotal           Float?
  ecart                   Float?
  dateCreation            DateTime @default(now())
  dateModification        DateTime @updatedAt

  @@map("couts")
}

model Recette {
  id                  Int       @id @default(autoincrement())
  dateDebut           DateTime
  dateFin             DateTime?
  anomaliesBloquantes Int       @default(0)
  anomaliesMajeures   Int       @default(0)
  anomaliesMineures   Int       @default(0)
  statutGlobal        String
  commentairesGP      String?   @db.Text
  dateCreation        DateTime  @default(now())
  dateModification    DateTime  @updatedAt

  @@map("recettes")
}

model UAT {
  id                        Int       @id @default(autoincrement())
  dateDebutUAT              DateTime
  dateFinUAT                DateTime?
  statutUAT                 String
  nombreRetoursUAT          Int       @default(0)
  reservesMetier            String?   @db.Text
  commentaireUAT            String?   @db.Text
  signatureValidationClient String?
  planAction                String?   @db.Text
  dateCreation              DateTime  @default(now())
  dateModification          DateTime  @updatedAt

  @@map("uat")
}

model Livraison {
  id                     Int       @id @default(autoincrement())
  numeroVersion          String
  releaseNotes           String    @db.Text
  dateLivraisonPrevue    DateTime
  dateLivraisonEffective DateTime?
  dateDeploiement        DateTime?
  responsableDevOps      String?
  statutLivraison        String
  commentairesGP         String?   @db.Text
  validationGONOGO       String?
  rollbackAutomatique    Boolean   @default(false)
  dateCreation           DateTime  @default(now())
  dateModification       DateTime  @updatedAt

  @@map("livraisons")
}

model UniteOrganisationnelle {
  id               Int      @id @default(autoincrement())
  nom              String
  type             String?
  adresse          String?
  codePostal       String?
  actif            Boolean  @default(true)
  societeId        Int?
  uoParenteId      Int?
  dateCreation     DateTime @default(now())
  dateModification DateTime @updatedAt

  @@map("unites_organisationnelles")
}

model CadreTemporel {
  id                              Int      @id @default(autoincrement())
  dateDebutProjet                 DateTime
  dateFinPrevisionnelle           DateTime
  statutValidationDate            String?
  dateCommunicationPlanningClient DateTime
  dateCreation                    DateTime @default(now())
  dateModification                DateTime @updatedAt

  @@map("cadre_temporel")
}
